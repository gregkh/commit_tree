commit 0c5b3b80f7aeba9b8d25e12f7b321d148a1b1cb9
Author: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Date:   Mon Jun 16 13:41:19 2014 -0700

    Linux 3.14.8

commit 229492982bf6914c1fc7220ece25577495999b7a
Author: Andreas Schrägle <ajs124.ajs124@gmail.com>
Date:   Sat May 24 16:35:43 2014 +0200

    ahci: add PCI ID for Marvell 88SE91A0 SATA Controller
    
    commit 754a292fe6b08196cb135c03b404444e17de520a upstream.
    
    Add support for Marvell Technology Group Ltd. 88SE91A0 SATA 6Gb/s
    Controller by adding its PCI ID.
    
    Signed-off-by: Andreas Schrägle <ajs124.ajs124@gmail.com>
    Signed-off-by: Tejun Heo <tj@kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit f0d199364ca36c86b672d57ada12052df321c155
Author: Jérôme Carretero <cJ-ko@zougloub.eu>
Date:   Tue Jun 3 14:56:25 2014 -0400

    ahci: Add Device ID for HighPoint RocketRaid 642L
    
    commit d251836508fb26cd1a22b41381739835ee23728d upstream.
    
    This device normally comes with a proprietary driver, using a web GUI
    to configure RAID:
     http://www.highpoint-tech.com/USA_new/series_rr600-download.htm
    But thankfully it also works out of the box with the AHCI driver,
    being just a Marvell 88SE9235.
    
    Devices 640L, 644L, 644LS should also be supported but not tested here.
    
    Signed-off-by: Jérôme Carretero <cJ-ko@zougloub.eu>
    Signed-off-by: Tejun Heo <tj@kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 4395894f1e3831a9379bdf3d9fd4f64c6f97da9d
Author: Alessandro Miceli <angelofsky1980@gmail.com>
Date:   Sun May 4 07:50:31 2014 -0300

    rtl28xxu: add [1b80:d3af] Sveon STV27
    
    commit 74a86272f05c3dae40f2d7b17ff09a0608cf3304 upstream.
    
    Added support for Sveon STV27 device (rtl2832u + FC0013 tuner)
    
    Signed-off-by: Alessandro Miceli <angelofsky1980@gmail.com>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit dcbf9b09aed2e7b79a0c3f6e446e3b2b06197157
Author: Alessandro Miceli <angelofsky1980@gmail.com>
Date:   Sun May 4 07:37:15 2014 -0300

    rtl28xxu: add [1b80:d39d] Sveon STV20
    
    commit f27f5b0ee4967babfb8b03511f5e76b79d781014 upstream.
    
    Added Sveon STV20 device based on Realtek RTL2832U and FC0012 tuner
    
    Signed-off-by: Alessandro Miceli <angelofsky1980@gmail.com>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit a5112aedf3cafc304687f4f358b26f3593251c46
Author: Brian Healy <healybrian@gmail.com>
Date:   Sun May 4 18:43:39 2014 -0300

    rtl28xxu: add 1b80:d395 Peak DVB-T USB
    
    commit 9ca24ae4083665bda38da45f4b5dc9bbaf936bc0 upstream.
    
    Add USB ID for Peak DVB-T USB.
    
    [crope@iki.fi: fix Brian email address and indentation]
    Signed-off-by: Brian Healy <healybrian@gmail.com>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
    
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>

commit fa7bb9b1311b76948464c2efbc31bcc6c8f515a3
Author: Jan Vcelak <jv@fcelda.cz>
Date:   Wed Feb 26 15:33:40 2014 -0300

    rtl28xxu: add chipset version comments into device list
    
    commit 60aa4c6fa5723af72cff154a5cd33ac4995d1e0a upstream.
    
    Signed-off-by: Jan Vcelak <jv@fcelda.cz>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 7425ce27dd89070144178cc19c485e41dd388a8b
Author: Jan Vcelak <jv@fcelda.cz>
Date:   Wed Feb 26 15:33:39 2014 -0300

    rtl28xxu: add USB ID for Genius TVGo DVB-T03
    
    commit ac298ccdde4fe9b0a966e548a232ff4e8a6b8a31 upstream.
    
    0458:707f KYE Systems Corp. (Mouse Systems) TVGo DVB-T03 [RTL2832]
    
    The USB dongle uses RTL2832U demodulator and FC0012 tuner.
    
    Signed-off-by: Jan Vcelak <jv@fcelda.cz>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit ff3ca2bd5c9e4cf87f9826ef252a078ae99e037c
Author: Till Dörges <till@doerges.net>
Date:   Tue Feb 11 17:27:57 2014 -0300

    rtl28xxu: add ID [0ccd:00b4] TerraTec NOXON DAB Stick (rev 3)
    
    commit a24bc323eb07e2a3a751e23c172b68d1b239db67 upstream.
    
    I've got the following DAB USB stick that also works fine with the
    DVB_USB_RTL28XXU driver after I added its USB ID:
            Bus 001 Device 009: ID 0ccd:00b4 TerraTec Electronic GmbH
    
    [crope@iki.fi: apply patch partly manually]
    Signed-off-by: Till Dörges <till@doerges.net>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <m.chehab@samsung.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit d27fb05d96cd11c2577ae89cbb0fe1778b1051d1
Author: Tomas Winkler <tomas.winkler@intel.com>
Date:   Mon May 12 12:19:41 2014 +0300

    mei: me: read H_CSR after asserting reset
    
    commit c40765d919d25d2d44d99c4ce39e48808f137e1e upstream.
    
    According the spec the host should read H_CSR again
    after asserting reset H_RST to ensure that reset was
    read by the firmware
    
    Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
    Signed-off-by: Alexander Usyskin <alexander.usyskin@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit b6ac0f888ae9b06b3d4092b8252d493b059d1ded
Author: Tomas Winkler <tomas.winkler@intel.com>
Date:   Mon May 12 12:19:40 2014 +0300

    mei: me: drop harmful wait optimization
    
    commit 07cd7be3d92eeeae1f92a017f2cfe4fdd9256526 upstream.
    
    It my take time till ME_RDY will be cleared after the reset,
    so we cannot check the bit before we got the interrupt
    
    Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
    Signed-off-by: Alexander Usyskin <alexander.usyskin@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 7247670d5fb03e33ddd732aec69159b8d09c11c1
Author: Tomas Winkler <tomas.winkler@intel.com>
Date:   Mon May 12 12:19:39 2014 +0300

    mei: me: fix hw ready reset flow
    
    commit b04ada92ffaabb868497a1fce8e4f6bf74e5488f upstream.
    
    We cleared H_RST for H_CSR on spurious interrupt generated when ME_RDY
    while cleared and not while  ME_RDY is set. The spurious interrupt
    is not delivered on all platforms in this case the
    driver may fail to initialize.
    
    Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
    Signed-off-by: Alexander Usyskin <alexander.usyskin@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 27f6dca8935ccbd73b6021098e83fc54a6248832
Author: Alexei Starovoitov <ast@kernel.org>
Date:   Wed Jun 4 15:49:50 2014 -0700

    PCI/MSI: Fix memory leak in free_msi_irqs()
    
    commit b701c0b1fe819a2083fc6ec5332e0e4492b9516d upstream.
    
    free_msi_irqs() is leaking memory, since list_for_each_entry(entry,
    &dev->msi_list, list) {...} is never executed, because dev->msi_list is
    made empty by the loop just above this one.
    
    Fix it by relying on zero termination of attribute array like
    populate_msi_sysfs() does.
    
    Fixes: 1c51b50c2995 ("PCI/MSI: Export MSI mode using attributes, not kobjects")
    Signed-off-by: Alexei Starovoitov <ast@plumgrid.com>
    Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
    Acked-by: Neil Horman <nhorman@tuxdriver.com>
    Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 732eafc78bba8e18a51c169f3dc7f33cddcdc401
Author: Andy Lutomirski <luto@amacapital.net>
Date:   Wed May 28 23:09:58 2014 -0400

    auditsc: audit_krule mask accesses need bounds checking
    
    commit a3c54931199565930d6d84f4c3456f6440aefd41 upstream.
    
    Fixes an easy DoS and possible information disclosure.
    
    This does nothing about the broken state of x32 auditing.
    
    eparis: If the admin has enabled auditd and has specifically loaded
    audit rules.  This bug has been around since before git.  Wow...
    
    Signed-off-by: Andy Lutomirski <luto@amacapital.net>
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 670ffb50413f386f92e59511c60b679f46e5cace
Author: Nicholas Bellinger <nab@linux-iscsi.org>
Date:   Thu Jun 5 23:37:00 2014 -0700

    target: Allow READ_CAPACITY opcode in ALUA Standby access state
    
    commit e7810c2d2c37fa8e58dda74b00790dab60fe6fba upstream.
    
    This patch allows READ_CAPACITY + SAI_READ_CAPACITY_16 opcode
    processing to occur while the associated ALUA group is in Standby
    access state.
    
    This is required to avoid host side LUN probe failures during the
    initial scan if an ALUA group has already implicitly changed into
    Standby access state.
    
    This addresses a bug reported by Chris + Philip using dm-multipath
    + ESX hosts configured with ALUA multipath.
    
    (Drop v3.15 specific set_ascq usage - nab)
    
    Reported-by: Chris Boot <crb@tiger-computing.co.uk>
    Reported-by: Philip Gaw <pgaw@darktech.org.uk>
    Cc: Chris Boot <crb@tiger-computing.co.uk>
    Cc: Philip Gaw <pgaw@darktech.org.uk>
    Cc: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit e75fa31d0fbfa038a68a6ade4213291c41fde32b
Author: Nicholas Bellinger <nab@linux-iscsi.org>
Date:   Tue Jun 3 18:27:52 2014 -0700

    iser-target: Fix multi network portal shutdown regression
    
    commit 2363d196686e44c0158929e7cf96c8589a24a81b upstream.
    
    This patch fixes a iser-target specific regression introduced in
    v3.15-rc6 with:
    
    commit 14f4b54fe38f3a8f8392a50b951c8aa43b63687a
    Author: Sagi Grimberg <sagig@mellanox.com>
    Date:   Tue Apr 29 13:13:47 2014 +0300
    
        Target/iscsi,iser: Avoid accepting transport connections during stop stage
    
    where the change to set iscsi_np->enabled = false within
    iscsit_clear_tpg_np_login_thread() meant that a iscsi_np with
    two iscsi_tpg_np exports would have it's parent iscsi_np set
    to a disabled state, even if other iscsi_tpg_np exports still
    existed.
    
    This patch changes iscsit_clear_tpg_np_login_thread() to only
    set iscsi_np->enabled = false when shutdown = true, and also
    changes iscsit_del_np() to set iscsi_np->enabled = true when
    iscsi_np->np_exports is non zero.
    
    Cc: Sagi Grimberg <sagig@dev.mellanox.co.il>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit dced9703a3b0972ba42eea27281a363bfb3d0c6f
Author: Sagi Grimberg <sagig@mellanox.com>
Date:   Tue Apr 29 13:13:47 2014 +0300

    Target/iscsi,iser: Avoid accepting transport connections during stop stage
    
    commit 14f4b54fe38f3a8f8392a50b951c8aa43b63687a upstream.
    
    When the target is in stop stage, iSER transport initiates RDMA disconnects.
    The iSER initiator may wish to establish a new connection over the
    still existing network portal. In this case iSER transport should not
    accept and resume new RDMA connections. In order to learn that, iscsi_np
    is added with enabled flag so the iSER transport can check when deciding
    weather to accept and resume a new connection request.
    
    The iscsi_np is enabled after successful transport setup, and disabled
    before iscsi_np login threads are cleaned up.
    
    Signed-off-by: Sagi Grimberg <sagig@mellanox.com>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 2cbbc2f411bebb054f258c648272f38e2a23e052
Author: Markos Chandras <markos.chandras@imgtec.com>
Date:   Wed Jan 22 14:40:00 2014 +0000

    MIPS: asm: thread_info: Add _TIF_SECCOMP flag
    
    commit 137f7df8cead00688524c82360930845396b8a21 upstream.
    
    Add _TIF_SECCOMP flag to _TIF_WORK_SYSCALL_ENTRY to indicate
    that the system call needs to be checked against a seccomp filter.
    
    Signed-off-by: Markos Chandras <markos.chandras@imgtec.com>
    Reviewed-by: Paul Burton <paul.burton@imgtec.com>
    Reviewed-by: James Hogan <james.hogan@imgtec.com>
    Cc: linux-mips@linux-mips.org
    Patchwork: https://patchwork.linux-mips.org/patch/6405/
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: Ben Hutchings <ben@decadent.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 806d009907bd86a03ecc7889e5794db74ba24ba6
Author: Florian Westphal <fw@strlen.de>
Date:   Fri May 2 15:32:16 2014 +0200

    netfilter: ipv4: defrag: set local_df flag on defragmented skb
    
    commit 895162b1101b3ea5db08ca6822ae9672717efec0 upstream.
    
    else we may fail to forward skb even if original fragments do fit
    outgoing link mtu:
    
    1. remote sends 2k packets in two 1000 byte frags, DF set
    2. we want to forward but only see '2k > mtu and DF set'
    3. we then send icmp error saying that outgoing link is 1500
    
    But original sender never sent a packet that would not fit
    the outgoing link.
    
    Setting local_df makes outgoing path test size vs.
    IPCB(skb)->frag_max_size, so we will still send the correct
    error in case the largest original size did not fit
    outgoing link mtu.
    
    Reported-by: Maxime Bizon <mbizon@freebox.fr>
    Suggested-by: Maxime Bizon <mbizon@freebox.fr>
    Fixes: 5f2d04f1f9 (ipv4: fix path MTU discovery with connection tracking)
    Signed-off-by: Florian Westphal <fw@strlen.de>
    Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
    Cc: Jiri Slaby <jslaby@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

commit 5bacea89dc8dfd3f7d7dfbed798f3b41d4f53c78
Author: Andy Lutomirski <luto@amacapital.net>
Date:   Tue Jun 10 12:45:42 2014 -0700

    fs,userns: Change inode_capable to capable_wrt_inode_uidgid
    
    commit 23adbe12ef7d3d4195e80800ab36b37bee28cd03 upstream.
    
    The kernel has no concept of capabilities with respect to inodes; inodes
    exist independently of namespaces.  For example, inode_capable(inode,
    CAP_LINUX_IMMUTABLE) would be nonsense.
    
    This patch changes inode_capable to check for uid and gid mappings and
    renames it to capable_wrt_inode_uidgid, which should make it more
    obvious what it does.
    
    Fixes CVE-2014-4014.
    
    Cc: Theodore Ts'o <tytso@mit.edu>
    Cc: Serge Hallyn <serge.hallyn@ubuntu.com>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Cc: Dave Chinner <david@fromorbit.com>
    Signed-off-by: Andy Lutomirski <luto@amacapital.net>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
